{% extends 'trackerapp/main.html' %}
{% load static %}
{% block content %}
  <div class="calculator">
    <form class="" method="POST">
      <h3>Calculate Your Profit</h3>
      <div class="form-item">
        <label for="number">Number of Turnips:</label><br>
        <input type="text" name="number" id="number" required>
      </div>
      <div class="form-item">
        <label for="buyingprice">Buying Price:</label><br>
        <input type="text" name="buyingprice" id="buying" required>
      </div>
      <div class="form-item">
        <label for="sellingprice">Selling Price:</label><br>
        <input type="text" name="sellingprice" id="selling" required>
      </div>
      <button type="button" class="sub-btn" id="btn">Calculate</button>
      <div class="form-item">
        <p>Revenue</p>
        <p id="rev"></p>
      </div>
      <div class="form-item">
        <p>Expenditure</p>
        <p id="exp"></p>
      </div>
      <div class="form-item">
        <p>Profit</p>
        <p id="profit"></p>
      </div>
    </form>
  </div>
  <script type="text/javascript">
    const calculateProfit = (event) => {
      event.preventDefault();

      const num = document.getElementById('number').value
      const buyingPrice = document.getElementById('buying').value
      const sellingPrice = document.getElementById('selling').value

      revenue = num * sellingPrice;
      expenditure = num * buyingPrice;
      profit = revenue - expenditure;

      document.forms[0].reset();

      console.log('calculated', revenue, expenditure, profit)
      document.getElementById('rev').innerHTML = revenue
      document.getElementById('exp').innerHTML = expenditure
      document.getElementById('profit').innerHTML = profit
    }

    document.addEventListener('DOMContentLoaded', ()=>{
      document.getElementById('btn').addEventListener('click', calculateProfit);
    });
  </script>
{% endblock content %}
